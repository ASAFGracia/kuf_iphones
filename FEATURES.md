# üéØ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. ‚è±Ô∏è –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω —Å 3 –º–∏–Ω—É—Ç –Ω–∞ **1 –º–∏–Ω—É—Ç—É**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞: `PARSING_INTERVAL_MINUTES=1` –≤ `config.py`

### 2. üìÑ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö **10 —Å—Ç—Ä–∞–Ω–∏—Ü** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞: `PARSING_PAGES_COUNT=10` –≤ `config.py`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–∞—Ä—Å–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –æ—Ç 1 –¥–æ 10
- –ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π - –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥
- –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ–¥–∏–∞–Ω—ã

### 3. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–º–µ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `notified` –≤ —Ç–∞–±–ª–∏—Ü—É `advertisements`
- –û–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π `notified = TRUE`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: `notified = FALSE`
- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: `notified = TRUE`
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–∞—Ä—Å–∏–Ω–≥–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å `notified = TRUE` –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

### 4. üîß –ö–æ–º–∞–Ω–¥–∞ /sql –¥–ª—è –∞–¥–º–∏–Ω–∞
- –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Telegram
- –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID `8507895419`
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/sql SELECT * FROM users LIMIT 10
/sql SELECT user_id, nickname, city FROM users WHERE is_active = TRUE
/sql SELECT COUNT(*) as total FROM advertisements WHERE source = 'kufar'
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –¢–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π LIMIT 100 (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)
- –ú–∞–∫—Å–∏–º—É–º 50 —Å—Ç—Ä–æ–∫ –≤ –æ—Ç–≤–µ—Ç–µ

### 5. üë§ –ó–∞–ø—Ä–æ—Å –Ω–∏–∫–Ω–µ–π–º–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –Ω–∏–∫–Ω–µ–π–º
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –Ω–∏–∫ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è"
- –ù–∏–∫–Ω–µ–π–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–∏ `/start` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –Ω–∏–∫–Ω–µ–π–º–∞
- –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è
- –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –Ω–∏–∫–Ω–µ–π–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### 6. üìä –õ–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `user_logs`
- –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:
  - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `action` - –¥–µ–π—Å—Ç–≤–∏–µ (start, city_selected, model_selected –∏ —Ç.–¥.)
  - `message_text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
  - `command` - –∫–æ–º–∞–Ω–¥–∞ (/start, /city, /sql –∏ —Ç.–¥.)
  - `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ (avito –∏–ª–∏ kufar)
  - `created_at` - –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤:**
```sql
-- –í—Å–µ –ª–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT * FROM user_logs WHERE user_id = 8507895419 ORDER BY created_at DESC;

-- –õ–æ–≥–∏ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
SELECT command, COUNT(*) as count FROM user_logs GROUP BY command;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –¥–µ–π—Å—Ç–≤–∏–π
SELECT * FROM user_logs ORDER BY created_at DESC LIMIT 50;
```

## üìã –£–ª—É—á—à–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏

### –î–ª—è Kufar (–ë–µ–ª–∞—Ä—É—Å—å):
- –î–µ—à–µ–≤–ª–µ –Ω–∞ **15%** –ò–õ–ò –Ω–∞ **200 BYN**

### –î–ª—è Avito (–†–æ—Å—Å–∏—è):
- –î–µ—à–µ–≤–ª–µ –Ω–∞ **15%** –ò–õ–ò –Ω–∞ **6000 RUB**

**–ü—Ä–∏–º–µ—Ä:**
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞: 1000 BYN
- –¶–µ–Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: 850 BYN
- –≠–∫–æ–Ω–æ–º–∏—è: 150 BYN (15%)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (15% >= 15% –∏–ª–∏ 150 >= 200)

## üîç –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

### –ú–æ–¥–µ–ª–∏ iPhone:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏—è
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- –°–ª–∏—Ç–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ: `iphone11`, `–∞–π—Ñ–æ–Ω13–ø—Ä–æ`

### –ü–∞–º—è—Ç—å:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: `64gb`, `64 –≥–±`, `64–≥–±`
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç "64 –ì–ë"

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `username` - Username –≤ Telegram
- `nickname` - –ù–∏–∫–Ω–µ–π–º –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- `is_admin` - –§–ª–∞–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (TRUE –¥–ª—è 8507895419)
- `source` - –ò—Å—Ç–æ—á–Ω–∏–∫ (avito –∏–ª–∏ kufar)
- `city`, `model`, `max_price` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–∞—Ä—Å–∏–Ω–≥

### –¢–∞–±–ª–∏—Ü–∞ `user_logs`:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `action` - –î–µ–π—Å—Ç–≤–∏–µ
- `message_text` - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `command` - –ö–æ–º–∞–Ω–¥–∞
- `source` - –ò—Å—Ç–æ—á–Ω–∏–∫ (avito –∏–ª–∏ kufar)
- `created_at` - –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è

### –¢–∞–±–ª–∏—Ü–∞ `advertisements`:
- `avito_id` / `kufar_id` - ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `source` - –ò—Å—Ç–æ—á–Ω–∏–∫
- `price` - –¶–µ–Ω–∞
- `model` - –ú–æ–¥–µ–ª—å iPhone
- `city` - –ì–æ—Ä–æ–¥
- `memory` - –ü–∞–º—è—Ç—å
- `median_price` - –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞
- `price_difference` - –≠–∫–æ–Ω–æ–º–∏—è (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- `notified` - –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (TRUE/FALSE)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```sql
/sql SELECT user_id, nickname, username, city, model, is_active, source FROM users
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```sql
/sql SELECT * FROM user_logs ORDER BY created_at DESC LIMIT 20
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
```sql
/sql SELECT * FROM advertisements WHERE notified = TRUE ORDER BY created_at DESC LIMIT 20
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
```sql
/sql SELECT source, COUNT(*) as total, COUNT(CASE WHEN notified = TRUE THEN 1 END) as sent FROM advertisements GROUP BY source
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í —Ñ–∞–π–ª–µ `config.py`:
- `PARSING_INTERVAL_MINUTES = 1` - –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ (–º–∏–Ω—É—Ç—ã)
- `PARSING_PAGES_COUNT = 10` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- `ADMIN_USER_ID = 8507895419` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã /sql

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–∏–∫–Ω–µ–π–º–∞–º–∏:
```sql
/sql SELECT user_id, nickname, username, city, model, source FROM users
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```sql
/sql SELECT user_id, COUNT(*) as actions FROM user_logs GROUP BY user_id ORDER BY actions DESC
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
```sql
/sql SELECT model, city, price, median_price, price_difference, created_at FROM advertisements WHERE notified = TRUE ORDER BY created_at DESC LIMIT 20
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º:
```sql
/sql SELECT model, COUNT(*) as count, AVG(price) as avg_price FROM advertisements GROUP BY model ORDER BY count DESC
```

